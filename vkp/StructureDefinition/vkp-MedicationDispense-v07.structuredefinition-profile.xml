<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="vkp-MedicationDispense-v07" />
  <meta>
    <lastUpdated value="2018-01-23T10:23:40.585+01:00" />
  </meta>
  <url value="http://ehelse.no/fhir/StructureDefinition/vkp-MedicationDispense-v07" />
  <name value="vkp-MedicationDispense" />
  <status value="draft" />
  <date value="2017-10-31T13:47:23.347+01:00" />
  <description value="Profile of the MedicationDispense resource. Used in the Norwegian Personal Connected Health project to document MedicationDispense events from devices dispensing medication to the user at the patients home." />
  <fhirVersion value="3.0.1" />
  <kind value="resource" />
  <abstract value="false" />
  <type value="MedicationDispense" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/MedicationDispense" />
  <derivation value="constraint" />
  <differential>
    <element id="MedicationDispense">
      <path value="MedicationDispense" />
      <definition value="Profile of the MedicationDispense resource. Used in the Norwegian Personal Connected Health project to document MedicationDispense events from devices dispensing medication to the user at the patients home. The Resource is also used to report that a planned dispense event did not occur according to plan.&#xD;&#xA;&#xD;&#xA;Indicates that a medication product is to be or has been dispensed for a named person/patient.  This includes a description of the medication product (supply) provided and the instructions for administering the medication.  The medication dispense is the result of a pharmacy system responding to a medication order.&#xD;&#xA;&#xD;&#xA;" />
    </element>
    <element id="MedicationDispense.identifier">
      <path value="MedicationDispense.identifier" />
      <short value="Unique code or number identifying the MedicationDispense" />
      <definition value="Unique code or number identifying the MedicationDispense&#xD;&#xA;&#xD;&#xA;VKP project uses UUID. &#xD;&#xA;&#xD;&#xA;Example: urn:uuid:2e82976a-35d6-4870-a4d5-d79abf772a8f" />
      <comment value="Should be a UUID" />
    </element>
    <element id="MedicationDispense.partOf">
      <path value="MedicationDispense.partOf" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.status">
      <path value="MedicationDispense.status" />
      <short value="in-progress | completed" />
      <definition value="A code specifying the state of the set of dispense events.&#xD;&#xA;&#xD;&#xA;The VKP project uses a subset of the message-status (http://hl7.org/fhir/medication-admin-status) CodeSystem containing the codes:&#xD;&#xA;- in-progress&#xD;&#xA;- completed" />
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="MedicationDispenseStatus" />
        </extension>
        <strength value="required" />
        <valueSetReference>
          <reference value="http://ehelse.no/fhir/ValueSet/vkp-medicationdispense-message-status-v05" />
        </valueSetReference>
      </binding>
    </element>
    <element id="MedicationDispense.category">
      <path value="MedicationDispense.category" />
      <short value="Event types when medication dispencer performs the medication dispense" />
      <definition value="Event types when medication dispencer performs the medication dispense. Values from http://ehelse.no/fhir/CodeSystem/vkp-medicationdispense-events-v07 is required&#xD;&#xA;" />
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="MedicationDispenseCategory" />
        </extension>
        <strength value="required" />
        <valueSetUri value="http://ehelse.no/fhir/ValueSet/vkp-medicationdispense-events-v07" />
      </binding>
    </element>
    <element id="MedicationDispense.medication[x]:medicationCodeableConcept">
      <path value="MedicationDispense.medicationCodeableConcept" />
      <sliceName value="medicationCodeableConcept" />
      <short value="Will always be unknown" />
      <definition value="VKP project always uses unknown value &#xD;&#xA;&#xD;&#xA;Fixed value: &quot;Ukjent medisin&quot;" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <fixedCodeableConcept>
        <text value="Ukjent medisin" />
      </fixedCodeableConcept>
    </element>
    <element id="MedicationDispense.subject">
      <path value="MedicationDispense.subject" />
      <definition value="A link to a resource representing the person or the group to whom the medication will be given.&#xD;&#xA;&#xD;&#xA;VKP always references a Patient Resource" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
      </type>
    </element>
    <element id="MedicationDispense.context">
      <path value="MedicationDispense.context" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.supportingInformation">
      <path value="MedicationDispense.supportingInformation" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.performer">
      <path value="MedicationDispense.performer" />
      <short value="Device used to dispense" />
    </element>
    <element id="MedicationDispense.performer.actor">
      <path value="MedicationDispense.performer.actor" />
      <short value="Device used to dispense" />
      <definition value="The device used to dispense the medication to the patient.  For example, a particular medication dispense device&#xD;&#xA;&#xD;&#xA;VKP-norway: Should be a logical reference containing the IMEI number of the device.&#xD;&#xA;display value should conatin the name of the device type&#xD;&#xA;&#xD;&#xA;Example:&#xD;&#xA;~~~~&#xD;&#xA;&lt;device&gt;&#xD;&#xA;   &lt;identifier&gt;&#xD;&#xA;   &lt;system value=&quot;http://dignio.no/IMEInummer&quot; /&gt;&#xD;&#xA;   &lt;value value=&quot;123456789101112&quot; /&gt;&#xD;&#xA;   &lt;/identifier&gt;&#xD;&#xA;   &lt;display value=&quot;Medido multidosesdispenser&quot;/&gt;&#xD;&#xA;&lt;/device&gt;&#xD;&#xA;~~~~" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Device" />
      </type>
    </element>
    <element id="MedicationDispense.authorizingPrescription">
      <path value="MedicationDispense.authorizingPrescription" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.type">
      <path value="MedicationDispense.type" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.quantity">
      <path value="MedicationDispense.quantity" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.daysSupply">
      <path value="MedicationDispense.daysSupply" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.whenPrepared">
      <path value="MedicationDispense.whenPrepared" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.whenHandedOver">
      <path value="MedicationDispense.whenHandedOver" />
      <definition value="Timestamp defining the point in time the MedicationDispense event took place. The timestamp could also be set for &quot;negative&quot; events, when a product was not provided to the patient according to plan.&#xD;&#xA;&#xD;&#xA;The time the dispensed product was/was not provided to the patient or their representative." />
    </element>
    <element id="MedicationDispense.destination">
      <path value="MedicationDispense.destination" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.receiver">
      <path value="MedicationDispense.receiver" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.note">
      <path value="MedicationDispense.note" />
      <definition value="VKP: In the VPK project additional information about the MedicationDispense event sould be documented in a Composition in the Message Bundle&#xD;&#xA;&#xD;&#xA;'Extra information about the dispense that could not be conveyed in the other attributes." />
      <max value="0" />
    </element>
    <element id="MedicationDispense.substitution">
      <path value="MedicationDispense.substitution" />
      <max value="0" />
    </element>
    <element id="MedicationDispense.detectedIssue">
      <path value="MedicationDispense.detectedIssue" />
      <max value="0" />
    </element>
  </differential>
</StructureDefinition>